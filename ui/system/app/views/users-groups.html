<div ng-if="localSystem.users.provider == null" class="blank-slate-pf " id="">
  <div class="blank-slate-pf-icon">
    <span class="pficon pficon-users"></span>
  </div>
  <h1>
    {{'No accounts provider configured' | translate}}
  </h1>
  <p>
    {{'Users and groups are available through an accounts provider. You can connect this server to a remote accounts provider,
    or install a local one. Some features are available depending on the accounts provider type' | translate}}
  </p>
  <div class="blank-slate-pf-main-action">

    <div class="cards-pf col-sm-6 col-md-6">
      <div class="blank-slate-pf no-padding margin-top-md" id="">
        <div class="blank-slate-pf-icon">
          <span class="fa fa-database"></span>
        </div>
        <h1>
          LDAP
        </h1>
        <p>
          {{'Easy to configure, does not support authenticated access to shared folders' | translate}}
        </p>
        <div class="blank-slate-pf-main-action">
          <button ng-click="selectProvider('ldap')" class="btn btn-primary btn-lg">{{'Use LDAP' | translate}}</button>
        </div>
      </div>
    </div>
    <div class="cards-pf col-sm-6  col-md-6">
      <div class="blank-slate-pf no-padding margin-top-md" id="">
        <div class="blank-slate-pf-icon">
          <span class="pficon pficon-repository"></span>
        </div>
        <h1>
          Active Directory
        </h1>
        <p>
          {{'Enables all shared folders features, requires advanced configuration options' | translate}}
        </p>
        <div class="blank-slate-pf-main-action">
          <button ng-click="selectProvider('directory')" class="btn btn-primary btn-lg">{{'Use Active Directory' | translate}}</button>
        </div>
      </div>
    </div>

  </div>
</div>

<div ng-if="localSystem.users.provider == 'ldap'" class="blank-slate-pf " id="">
  <div class="blank-slate-pf-icon">
    <span class="fa fa-database"></span>
  </div>
  <h1>
    {{'You choose' | translate}}: <strong>LDAP</strong> <button ng-click="selectProvider(null)" class="btn btn-primary">{{'Change' | translate}}</button>
  </h1>
  <p>
    {{'An LDAP database can store users, groups and passwords. It is required a RFC2307 compatible LDAP schema' | translate}}
  </p>
  <div class="blank-slate-pf-main-action">

    <div class="cards-pf col-sm-6 col-md-6">
      <div class="blank-slate-pf no-padding margin-top-md" id="">
        <div class="blank-slate-pf-icon">
          <span class="fa fa-cloud"></span>
        </div>
        <h1>
          {{'Bind to Remote' | translate}}
        </h1>
        <div class="blank-slate-pf-main-action">
          <button ng-click="openBindToRemote()" class="btn btn-primary btn-lg">{{'Bind' | translate}}</button>
        </div>
      </div>
    </div>
    <div class="cards-pf col-sm-6  col-md-6">
      <div class="blank-slate-pf no-padding margin-top-md" id="">
        <div class="blank-slate-pf-icon">
          <span class="fa fa-download"></span>
        </div>
        <h1>
          {{'Install an OpenLDAP Server' | translate}}
        </h1>
        <div class="blank-slate-pf-main-action">
          <button ng-click="openInstallLDAP()" class="btn btn-primary btn-lg">{{'Install' | translate}}</button>
        </div>
      </div>
    </div>

  </div>
</div>

<div ng-if="localSystem.users.provider == 'directory'" class="blank-slate-pf " id="">
  <div class="blank-slate-pf-icon">
    <span class="pficon pficon-repository"></span>
  </div>
  <h1>
    {{'You choose' | translate}}: <strong>Active Directory</strong> <button ng-click="selectProvider(null)" class="btn btn-primary">{{'Change' | translate}}</button>
  </h1>
  <p>
    {{'Computers in an Active Directory domain can be simple members or domain controllers (DC)' | translate}}
  </p>
  <div class="blank-slate-pf-main-action">

    <div class="cards-pf col-sm-6 col-md-6">
      <div class="blank-slate-pf no-padding margin-top-md" id="">
        <div class="blank-slate-pf-icon">
          <span class="fa fa-graduation-cap"></span>
        </div>
        <h1>
          {{'Join an existing domain' | translate}}
        </h1>
        <div class="blank-slate-pf-main-action">
          <button ng-click="openJoinADomain()" class="btn btn-primary btn-lg">{{'Join' | translate}}</button>
        </div>
      </div>
    </div>
    <div class="cards-pf col-sm-6  col-md-6">
      <div class="blank-slate-pf no-padding margin-top-md" id="">
        <div class="blank-slate-pf-icon">
          <span class="fa fa-magic"></span>
        </div>
        <h1>
          {{'Create new domain and become DC' | translate}}
        </h1>
        <div class="blank-slate-pf-main-action">
          <button ng-click="openCreateDC()" class="btn btn-primary btn-lg">{{'Create' | translate}}</button>
        </div>
      </div>
    </div>

  </div>
</div>

<div class="modal fade" id="bindToRemoteModal" tabindex="-1" role="dialog" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{'Bind to Remote LDAP Server' | translate}}</h4>
      </div>
      <form class="form-horizontal" ng-submit="bindToRemote(objects.newProvider)">

        <div class="modal-body">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'Hostname or IP' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.hostname" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'TCP Port' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.tcpport" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'Configuration' | translate}}</label>
            <div class="col-sm-9">
              <button class="btn btn-primary" ng-click="checkBindConfig(objects.newProvider)">{{'Check' | translate}}</button>
              <span ng-if="objects.newProvider.checkedConfig" class="pficon pficon-ok status-icon"></span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default" type="button" data-dismiss="modal">{{'Cancel' | translate}}</button>
          <button ng-disabled="!objects.newProvider.checkedConfig" class="btn btn-primary" type="submit">{{'Bind' | translate}}</button>
        </div>

      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="installLDAPModal" tabindex="-1" role="dialog" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{'Install an OpenLDAP server' | translate}}</h4>
      </div>
      <form class="form-horizontal" ng-submit="installLDAP()">

        <div class="modal-body">
          <p>{{'Download and configure OpenLDAP server as local LDAP accounts provider' | translate}}</p>
          <div class="progress-description">
            <div class="spinner spinner-xs spinner-inline"></div> <strong>{{'Installing'}}:</strong> {{'OpenLDAP server'}}
          </div>
          <div class="progress progress-label-top-right">
            <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
              <span>40%</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default" type="button" data-dismiss="modal">{{'Cancel' | translate}}</button>
          <button class="btn btn-primary" type="submit">{{'Install' | translate}}</button>
        </div>

      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="joinADomainModal" tabindex="-1" role="dialog" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{'Join Active Directory' | translate}}</h4>
      </div>
      <form class="form-horizontal" ng-submit="joinADomain(objects.newProvider)">

        <div class="modal-body">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'DNS domain name' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.dnsDomainName" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'AD DNS Server' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.adDNSServer" class="form-control">
            </div>
          </div>
          <p>{{'Credentials for joining the domain' | translate}}</p>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'Username' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.credentials.username" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'Password' | translate}}</label>
            <div class="col-sm-9">
              <input required type="password" ng-model="objects.newProvider.credentials.password" class="form-control">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default" type="button" data-dismiss="modal">{{'Cancel' | translate}}</button>
          <button class="btn btn-primary" type="submit">{{'Join' | translate}}</button>
        </div>

      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="createDCModal" tabindex="-1" role="dialog" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{'Create a new Active Directory domain' | translate}}</h4>
      </div>
      <form class="form-horizontal" ng-submit="createDC(objects.newProvider)">

        <div class="modal-body">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'DNS domain name' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.dnsDomainName" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'NetBIOS domain name' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.netbiosDomainName" class="form-control">
            </div>
          </div>
          <div class="alert alert-warning alert-dismissable">
            <span class="pficon pficon-warning-triangle-o"></span>
            <strong>{{'The chosen IP address must satisfy all of the below conditions' | translate}}</strong>
            <ul>
              <li>{{'the IP address must be in the same subnet range of a green network: 192.168.5.0/24' | translate}}</li>
              <li>{{'the IP address must be unused currently' | translate}}</li>
            </ul>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'Domain Controller IP address' | translate}}</label>
            <div class="col-sm-9">
              <input required type="text" ng-model="objects.newProvider.domainControllerIP" class="form-control">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default" type="button" data-dismiss="modal">{{'Cancel' | translate}}</button>
          <button class="btn btn-primary" type="submit">{{'Create' | translate}}</button>
        </div>

      </form>
    </div>
  </div>
</div>
