<div ng-if="localSystem.services.list.length == 0" class="blank-slate-pf">
  <div class="blank-slate-pf-icon">
    <span class="pficon pficon-regions"></span>
  </div>
  <h1>
    {{'No services found' | translate}}
  </h1>
</div>

<div ng-if="localSystem.services.list.length > 0">
  <h3>{{'Services list' | translate}}</h3>
  <form role="form" class="search-pf has-button search">
    <div class="form-group has-clear">
      <div class="search-pf-input-group">
        <input ng-model="objects.searchString" type="text" class="form-control input-lg" placeholder="{{'Search' | translate}}...">
      </div>
    </div>
    <div class="form-group">
      <button class="btn btn-default btn-lg" type="submit"><span class="fa fa-search"></span></button>
    </div>
    <div ng-if="objects.selectedServices.length > 1" class="form-group empty">

    </div>
    <div ng-if="objects.selectedServices.length > 1" class="dropdown form-group">
      <button class="btn btn-primary btn-lg dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
          {{objects.selectedServices.length}} {{'services' | translate}}
          <span class="caret"></span>
        </button>
      <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1">
        <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="enableService(objects.selectedServices)" href="">
          <span class="fa fa-check span-right-margin-lg"></span>{{'Enable' | translate}}</a>
        </li>
        <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="disableService(objects.selectedServices)" href="">
          <span class="fa fa-times span-right-margin-lg"></span>{{'Disable' | translate}}</a>
        </li>
        <li role="presentation" class="divider"></li>
        <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="startService(objects.selectedServices)" href="">
          <span class="fa fa-play span-right-margin-lg"></span>{{'Start' | translate}}</a>
        </li>
        <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="stopService(objects.selectedServices)" href="">
          <span class="fa fa-refresh span-right-margin-lg"></span>{{'Restart' | translate}}</a>
        </li>
        <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="restartService(objects.selectedServices)" href="">
          <span class="fa fa-power-off span-right-margin-lg"></span>{{'Stop' | translate}}</a>
        </li>
        <li role="presentation" class="divider"></li>
        <li role="presentation"><a role="menuitem" tabindex="-1" ng-click="openDeleteService(objects.selectedServices)" href="">
          <span class="fa fa-trash span-right-margin-lg"></span>{{'Delete' | translate}}</a>
        </li>
      </ul>
    </div>
  </form>
  <div class="list-group list-view-pf">
    <div ng-repeat="s in localSystem.services.list | filter:objects.searchString" class="list-group-item {{s.checked ? 'list-selected' : ''}}">
      <div class="list-view-pf-checkbox">
        <input ng-click="addToSelected(s)" ng-model="s.checked" type="checkbox">
      </div>
      <div class="list-view-pf-actions">
        <button ng-click="s.running ? restartService[s] : startService[s]" class="btn btn-default button-minimum">
            <span class="fa fa-{{s.running ? 'refresh' : 'play'}} span-right-margin"></span>
            {{s.running ? 'Restart' : 'Start' | translate}}
        </button>
        <div class="dropdown pull-right dropdown-kebab-pf">
          <button class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            <span class="fa fa-ellipsis-v"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <a ng-click="s.status == 'enabled' ?  disableService([s]) : enableService([s])" href="">
                <span class="fa fa-{{s.status == 'enabled' ? 'times' : 'check'}} span-right-margin"></span>
                {{s.status == 'enabled' ? 'Disable' : 'Enable' | translate}}
              </a>
            </li>
            <li ng-if="s.running" role="separator" class="divider"></li>
            <li ng-if="s.running">
              <a ng-click="stopService([s])" href="">
                <span class="fa fa-power-off span-right-margin"></span>
                {{'Stop' | translate}}
              </a>
            </li>
            <li role="separator" class="divider"></li>
            <li>
              <a ng-click="openDeleteService([s])" href="">
                <span class="fa fa-trash span-right-margin"></span>
                {{'Delete' | translate}}
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="list-view-pf-main-info">
        <div class="list-view-pf-left">
          <span class="fa fa-fighter-jet list-view-pf-icon-sm"></span>
        </div>
        <div class="list-view-pf-body">
          <div class="list-view-pf-description">
            <div class="list-group-item-heading">
              {{s.name}}
            </div>
            <div class="list-group-item-text">
              <span>{{s.description}}</span>
            </div>
          </div>
          <div class="list-view-pf-additional-info">
            <div class="list-view-pf-additional-info-item {{s.status == 'enabled' ? 'green' : 'red'}}">
              <span class="fa fa-{{s.status == 'enabled' ? 'check' : 'times'}}"></span>
              <strong>{{s.status | capitalize}}</strong>
            </div>
            <div class="list-view-pf-additional-info-item {{s.running ? 'green' : 'red'}}">
              <span class="fa fa-{{s.running ? 'bolt' : 'power-off'}}"></span>
              <strong>{{s.running ? 'Running' : 'Stopped' | translate}}</strong>
            </div>
            <div class="list-view-pf-additional-info-item">
              <div ng-click="toggleDetails($event)" class="list-view-pf-expand">
                {{'Details' | translate}}
                <span class="fa fa-angle-right"></span>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="list-group-item-container container-fluid hidden">
        <div class="row">
          <div class="col-md-9">
            <h4>Properties</h4>
            <dl class="dl-horizontal">
              <dt>NTPServer</dt>
              <dd>pool.ntp.org</dd>
              <dt>UDPPorts</dt>
              <dd>123 56 89</dd>
              <dt>access</dt>
              <dd>green</dd>
              <dt>status</dt>
              <dd>enabled</dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteServiceModal" tabindex="-1" role="dialog" data-backdrop="static">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">{{objects.toDeleteServices > 1 ? 'Delete services' : 'Delete service' | translate}}</h4>
      </div>
      <form class="form-horizontal" ng-submit="deleteService(objects.toDeleteServices)">

        <div class="modal-body">
          <div class="form-group">
            <label class="col-sm-3 control-label" for="textInput-modal-markup">{{'Are you sure' | translate}}?</label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default" type="button" data-dismiss="modal">{{'Cancel' | translate}}</button>
          <button class="btn btn-danger" type="submit">{{'Delete' | translate}}</button>
        </div>

      </form>
    </div>
  </div>
</div>
