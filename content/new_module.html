
<html><head></head><body><h1 id="how-to-write-a-new-module">How to write a new module</h1>
<hr />
<p>A NethServer Cockpit module is composed by 3 main parts:</p>
<ul>
<li>Web interface: a mix of HTML and CSS which presents data loaded using JavaScript Cockpit or NethServer API</li>
<li>Package files: manifest and RPM spec file to create an installable package</li>
<li>Translation files (optional)</li>
</ul>
<p>To scaffold a new module use <a href="https://github.com/NethServer/generator-nethserver-cockpit">NethServer Cockpit Generator</a> for <a href="http://yeoman.io">Yeoman</a>.</p>
<h2 id="install-required-tools">Install required tools</h2>
<p>Let's assume you've already prepared your own <a href="./environment">development environment</a>,
you can now proceed by installing Yeoman and <code>generator-nethserver-cockpit</code> using <a href="https://www.npmjs.com/">npm</a>:</p>
<pre><code>npm install -g yo
npm install -g generator-nethserver-cockpit
</code></pre><h2 id="create">Create</h2>
<p>When scaffolding a new module, Yeoman will create the whole structure of 
a new NethServer Cockpit application, including all files needed for building an RPM.
First, create a new directory for your project:</p>
<pre><code>mkdir -p nethserver-cockpit-dummy
</code></pre><p>Then execute Yeoman and follow instructions on the screen specifying a meaningful project name:</p>
<pre><code>cd nethserver-cockpit-dummy
yo nethserver-cockpit
</code></pre><h2 id="customize">Customize</h2>
<p>Edit all <a href="application_manifest.md">application metadata</a> inside the manifest:</p>
<pre><code>root/usr/share/cockpit/nethserver/applications/nethserver-cockpit-dummy.json
</code></pre><p>It's now time to start implementing some nice feature, you just need to know HTML, CSS and some JavaScript basics:
there is no need to learn a new framework, use whatever you like.</p>
<p>The source code must be placed inside the <code>app</code> directory:</p>
<ul>
<li><code>index.html</code>: main HTML template, it already contains 3 sections:<ul>
<li>module dashboard on the top</li>
<li>application metadata on the right</li>
<li>settings on the center</li>
</ul>
</li>
<li><code>styles/main.css</code>: application stylesheet, customize your custom CSS but always follow <a href="./ui_guidelines">UI guidelines</a> </li>
<li><code>scripts/app.js</code>: JavaScript logic goes here. If you need to develop complex API, take a loot to <a href="./api_guidelines">API guidelines</a></li>
<li><code>assets/icon.png</code>: an icon for your application, we suggest to use a PNG image, 256 x 256 pixel</li>
</ul>
<p>You can ignore <code>i18n/po.tpl</code>, <code>manifest.json</code> and <code>override.json</code> files which are used for Cockpit internals.</p>
<p>The module will be installed inside <code>/usr/share/cockpit/&lt;project&gt;</code> directory.
Metadata will be copied inside <code>/usr/share/nethserver/applications</code> directory.</p>
<p>A new application card named as your project will be added to the "Applications" page. </p>
<h3 id="javascript-frameworks">JavaScript frameworks</h3>
<p>In case you really want to pick a JavaScript framework, just include it inside <code>index.html</code>.
The <code>prep-sources</code> script will do all the magic for you and include all needed dependencies.</p>
<p><strong>AngularJS</strong> (<a href="https://angularjs.org/">https://angularjs.org/</a>):</p>
<pre><code>&lt;html ng-app&gt;
...
&lt;script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"&gt;&lt;/script&gt;
</code></pre><p><strong>Vue</strong> (<a href="https://vuejs.org/">https://vuejs.org/</a>):</p>
<pre><code>&lt;script src="https://unpkg.com/vue"&gt;&lt;/script&gt;
</code></pre><p><strong>React</strong> (<a href="https://reactjs.org/">https://reactjs.org/</a>):</p>
<pre><code>&lt;script crossorigin src="https://unpkg.com/react@16/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"&gt;&lt;/script&gt;
</code></pre><h2 id="save-your-work">Save your work</h2>
<p>The code should always be kept under a version control system for tracking changes.
NethServer build system assumes you're using <a href="https://git-scm.com/docs/gittutorial">git</a>,
so commit everything on a git repository:</p>
<pre><code>git init
git add *
git commit -a -m "First import"
</code></pre><p>Always consider to share your code, take a look at <a href="https://github.com/">GitHub</a>.</p>
<h2 id="build-and-test">Build and test</h2>
<p>NethServer provides a set of tool for building RPMs under CentOS or Fedora.
<a href="http://docs.nethserver.org/projects/nethserver-devel/en/latest/building_rpms.html">Prepare the build environment</a>,
 then create the RPM for your module: </p>
<pre><code>./prep-sources
make-rpms nethserver-cockpit-dummy.spec
</code></pre><p>Copy the created RPM into your machine and install it to try out your new application 
by accessing Cockpit: <code>https://&lt;your_server&gt;:9090</code></p>
<p>If some JavaScript or HTML part doesn't load correctly, execute:</p>
<pre><code>systemctl restart cockpit
</code></pre></body></html>